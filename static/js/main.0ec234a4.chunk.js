(this["webpackJsonpneighborhood-map-touristy-things"]=this["webpackJsonpneighborhood-map-touristy-things"]||[]).push([[0],{10:function(e,t,a){e.exports=a.p+"static/media/heart-inactive-v3.0e0abb7f.svg"},19:function(e,t,a){e.exports={PlacesBG:"PlacesBG_PlacesBG__1hTJ3",iwPlaceName:"PlacesBG_iwPlaceName__1gJop",iwHeart:"PlacesBG_iwHeart__1-sCM"}},24:function(e,t,a){e.exports={SideDrawer:"SideDrawer_SideDrawer__3kXLK"}},38:function(e,t,a){e.exports={Toolbar:"Toolbar_Toolbar__ApScI"}},40:function(e,t,a){e.exports={DrawerButton:"DrawerButton_DrawerButton__OU7KX"}},41:function(e,t,a){e.exports=a.p+"static/media/heart-inactive-v2.0e1f1f09.svg"},42:function(e,t,a){e.exports={Modal:"Modal_Modal__1-5dN"}},43:function(e,t,a){e.exports={Backdrop:"Backdrop_Backdrop__3j6VK"}},44:function(e,t,a){e.exports={Auth:"Auth_Auth__1Zul_"}},45:function(e,t,a){e.exports={Search:"Search_Search__2SQmI",touched:"Search_touched__3LI-p"}},46:function(e,t,a){e.exports=a(75)},55:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(17),r=a.n(c),l=a(14),i=a(6),s=a(16),m=a(5),u=a(37);function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f={map:null,mapRef:null,mapLoaded:!1,mapCenter:{lat:34.1020231,lng:-118.3409712},mapPlaces:[],mapMarkers:[],mapTextLinks:[],infoWindow:null,searchText:"e.g. '90004' or 'Los Angeles, CA'",searchboxClicked:!1},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SETCENTER":return d({},e,{searchText:t.payload.target.value});case"SEARCHCLICKED":return d({},e,{searchText:"",searchboxClicked:!0});case"UPDATEMAP":var a={lat:t.payload.data.results[0].geometry.location.lat,lng:t.payload.data.results[0].geometry.location.lng};return d({},e,{mapPlaces:[],mapCenter:d({},e.mapCenter,{},a)});case"MAPLOADED":return d({},e,{map:t.payload.map,mapRef:t.payload.mapRef});case"PLACESLOADED":var n=Object(m.a)(e.mapPlaces).concat(t.payload),o=n.filter((function(e,t){return n.indexOf(e)===t}));return d({},e,{mapPlaces:o});case"UPDATEINFOWINDOW":return d({},e,{infoWindow:t.payload});case"UPDATEPLACEITEM":return e.mapPlaces[t.payload[0]].isFav=t.payload[1],d({},e,{mapPlaces:[].concat(Object(m.a)(e.mapPlaces),[e.mapPlaces[t.payload[0]]])});default:return e}},v=(a(55),a(13)),h=a(38),E=a.n(h),y=function(e){return o.a.createElement(n.Fragment,null,o.a.createElement("ul",{className:E.a.Toolbar},o.a.createElement("li",null,o.a.createElement(l.b,{to:"/auth"},"Login")),o.a.createElement("li",null,o.a.createElement(l.b,{to:"/register"},"Register"))))},w=a(40),b=a.n(w),C=a(41),P=a.n(C),O=a(10),k=a.n(O),A=a(8),S=a.n(A),D=Object(i.b)((function(e){return{places:e.mapReduce.mapPlaces}}))((function(e){var t=e.places.map((function(e){return e.name})).filter((function(e,t,a){return a.indexOf(e)===t})),a=e.places.map((function(a,n){if(t.indexOf(a.name)>=0){var c=t.indexOf(a.name),r=a.isFav?o.a.createElement("img",{src:S.a,alt:"is a favorite: ".concat(a.isFav),onClick:function(t){e.heartClick(t,a,n),!0===!!document.getElementsByClassName("heart-img2")[0]&&(document.getElementsByClassName("heart-img2")[0].src=a.isFav?S.a:k.a),!0===!!document.getElementsByClassName("heart-img")[0]&&(document.getElementsByClassName("heart-img")[0].src=a.isFav?S.a:k.a)}}):o.a.createElement("img",{src:P.a,alt:"is a favorite: ".concat(a.isFav),onClick:function(t){e.heartClick(t,a,n),!0===!!document.getElementsByClassName("heart-img2")[0]&&(document.getElementsByClassName("heart-img2")[0].src=a.isFav?S.a:k.a),!0===!!document.getElementsByClassName("heart-img")[0]&&(document.getElementsByClassName("heart-img")[0].src=a.isFav?S.a:k.a)}});return t.splice(c,1),o.a.createElement("li",{key:n,onClick:function(t){return e.click(t,a,n)}},a.name,r)}return!1}));return o.a.createElement("ul",{className:b.a.DrawerButton},a)})),x=a(24),_=a.n(x),N=Object(i.b)((function(e){return{map:e.mapReduce.map,places:e.mapReduce.mapPlaces,infowin:e.mapReduce.infoWindow}}),(function(e){return{onUpdateInfoWindow:function(t){e({type:"UPDATEINFOWINDOW",payload:t})},onUpdatePlaceItem:function(t,a){e({type:"UPDATEPLACEITEM",payload:[t,a]})}}}))((function(e){var t=null,a=function(t,a,n){t.preventDefault(),t.stopPropagation(),a.isFav=!a.isFav,console.log(a.isFav),e.onUpdatePlaceItem(n,a.isFav)};return o.a.createElement(n.Fragment,null,o.a.createElement("div",{className:_.a.SideDrawer},o.a.createElement(D,{click:function(n,o,c){console.log(n.target,c);var r=e.map,l=new window.google.maps.Marker({position:{lat:o.geometry.location.lat(),lng:o.geometry.location.lng()},map:e.map,title:o.name});t&&t.close(),e.infowin&&e.infowin.close();var i=e.infowin,s={name:o.name,image:o.photos?o.photos[0].getUrl():null},u=o.isFav?S.a:k.a;i.setContent("<div>\n        <div>".concat(s.name,'</div>\n        <div class="').concat(_.a.iwHeart,'">\n          <img src="').concat(u,'" class="heart-img2">\n        </div>')+(null!==s.image?'<img src="'.concat(s.image,'">'):"")+"</div>"),i.open(r,l),t=i;var p=i.addListener("domready",(function(){window.google.maps.event.removeListener(p);var e=document.querySelectorAll(".gm-style-iw img");Object(m.a)(e).forEach((function(e){e.style.width="100%"})),document.getElementsByClassName("heart-img2")[0].addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),a(e,o,c),e.target.src=o.isFav?S.a:k.a}));var t=document.querySelectorAll(".gm-style-iw button[title=Close]");Object(m.a)(t).forEach((function(e){e.style.right="1px"}));var n=document.querySelectorAll(".gm-style-iw-d");Object(m.a)(n).forEach((function(e){e.style.overflow="unset",e.style.overflowY="hidden"}));var r=document.querySelectorAll(".gm-style-iw-c");Object(m.a)(r).forEach((function(e){e.style.padding="12px",e.style.height="auto",e.style.boxSizing="content-box"}))}),void 0)},heartClick:a})))})),j=function(e){return o.a.createElement(n.Fragment,null,o.a.createElement(y,null),o.a.createElement(N,null),e.children)},L=a(42),F=a.n(L),I=function(e){var t=e.children;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:F.a.Modal},t))},B=a(43),T=a.n(B),W=function(e){return e.show?o.a.createElement("div",{className:T.a.Backdrop,onClick:e.click}):null},U=a(44),M=a.n(U),R=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(W,{show:!0}),o.a.createElement(I,{className:M.a.Auth},o.a.createElement("div",null,o.a.createElement("label",null,o.a.createElement("input",{type:"text",id:"email",name:"email",placeholder:"Email",value:"",required:!0,onChange:function(){}}))),o.a.createElement("div",null,o.a.createElement("label",null,o.a.createElement("input",{type:"text",id:"password",name:"password",placeholder:"Password",value:"",required:!0,onChange:function(){}})))))},q=function(e){return o.a.createElement("div",null,"Register")},z=a(25),G=a.n(z),H=G.a.create({baseURL:"https://maps.googleapis.com/maps/api"}),K=(G.a.create({baseURL:"https://scavenger-hunt-c-1573007989671.firebaseio.com"}),a(45)),J=a.n(K),X=Object(i.b)((function(e){return{center:e.mapReduce.searchText,searchClicked:e.mapReduce.searchboxClicked}}),(function(e){return{onSetCenter:function(t){e({type:"SETCENTER",payload:t})},onSearchClicked:function(t){e({type:"SEARCHCLICKED"})},onCheckEntered:function(t,a){if("Enter"===t.key||"ENTER"===t.key){var n="/geocode/json?address="+a+"&key=AIzaSyBSqWAWnXdkeCMI9gUZihf5WLVWQz-3UMA";H.get(n).then((function(t){e({type:"UPDATEMAP",payload:t})})).catch((function(t){e({type:"UPDATEMAPFAILED"})}))}}}}))((function(e){return o.a.createElement("div",{className:J.a.Search},o.a.createElement("input",{type:"text",onChange:e.onSetCenter,onKeyPress:function(t){return e.onCheckEntered(t,e.center)},onClick:function(){e.searchClicked||e.onSearchClicked()},value:e.center}))})),Q=a(19),V=a.n(Q),Z=Object(i.b)((function(e){return{map:e.mapReduce.map,places:e.mapReduce.mapPlaces,infowin:e.mapReduce.infoWindow}}),(function(e){return{onUpdateInfoWindow:function(t){e({type:"UPDATEINFOWINDOW",payload:t})}}}))((function(e){var t=null;return Object(n.useEffect)((function(){e.places.forEach((function(a,n){var o={url:"https://maps.gstatic.com/mapfiles/api-3/images/spotlight-poi2_hdpi.png",size:new window.google.maps.Size(23,36.8),scaledSize:new window.google.maps.Size(23,36.8)},c=new window.google.maps.Marker({position:{lat:a.geometry.location.lat(),lng:a.geometry.location.lng()},icon:o,map:e.map,title:a.name});window.google.maps.event.addListener(c,"click",(function(){t&&t.close(),e.infowin&&e.infowin.close();var o=a.isFav?S.a:k.a,r=e.infowin,l={name:a.name,image:a.photos?a.photos[0].getUrl():null};r.setContent("<div class=".concat(V.a.PlacesBG,">\n            <div>\n              <div class=").concat(V.a.iwPlaceName,">").concat(l.name,'</div>\n              <div class="').concat(V.a.iwHeart,'">\n                <img src="').concat(o,'" class="heart-img">\n              </div>\n            </div>')+(null!==l.image?'<div class="iw-place-img"><img src="'.concat(l.image,'"></div>'):"")+"</div>"),r.open(e.map,c),t=r;var i=r.addListener("domready",(function(){window.google.maps.event.removeListener(i);var t=document.querySelectorAll(".gm-style-iw img");Object(m.a)(t).forEach((function(e){e.style.width="100%"})),document.getElementsByClassName("heart-img")[0].addEventListener("click",(function(t){e.heartClick(t,a,n),t.target.src=a.isFav?S.a:k.a}));var o=document.querySelectorAll(".gm-style-iw button[title=Close]");Object(m.a)(o).forEach((function(e){e.style.right="1px"}));var c=document.querySelectorAll(".gm-style-iw-d");Object(m.a)(c).forEach((function(e){e.style.overflow="unset",e.style.overflowY="hidden"}));var r=document.querySelectorAll(".gm-style-iw-c");Object(m.a)(r).forEach((function(e){e.style.padding="12px",e.style.height="auto",e.style.boxSizing="content-box"}))}),this)}))}))})),o.a.createElement("p",null,"Some places.")})),Y=Object(i.b)((function(e){return{center:e.mapReduce.mapCenter}}),(function(e){return{onMapLoaded:function(t,a,n){e({type:"MAPLOADED",payload:{map:t,mapRef:a}});var o=new window.google.maps.LatLng(n);["amusement_park","art_gallery","bar","book_store","cafe","museum","tourist_attraction"].forEach((function(a){var n={location:o,radius:"500",type:""};n.type=a,n.type,new window.google.maps.places.PlacesService(t).nearbySearch(n,(function(t){e({type:"PLACESLOADED",payload:t})}))}))},onUpdateInfoWindow:function(t){e({type:"UPDATEINFOWINDOW",payload:t})},onUpdatePlaceItem:function(t,a){e({type:"UPDATEPLACEITEM",payload:[t,a]})}}}))((function(e){var t={ref:Object(n.useRef)(),className:e.className},a=function(){var a=new window.google.maps.Map(t.ref.current,{center:e.center,zoom:17}),n=new window.google.maps.InfoWindow({maxWidth:300});e.onMount&&e.onMount(a),e.onMapLoaded(a,t.ref,e.center),e.onUpdateInfoWindow(n)};return Object(n.useEffect)((function(){if(!window.google){var e=document.createElement("script");e.type="text/javascript",e.src="https://maps.google.com/maps/api/js?key=".concat("AIzaSyBSqWAWnXdkeCMI9gUZihf5WLVWQz-3UMA","&libraries=places");var t=document.getElementsByTagName("script")[0];return t.parentNode.insertBefore(e,t),e.addEventListener("load",a),function(){return e.removeEventListener("load",a)}}a()})),o.a.createElement(n.Fragment,null,o.a.createElement("div",Object.assign({},t,{style:{height:"calc(100vh - 60px)"}})),o.a.createElement(Z,{heartClick:function(t,a,n){console.log(t,a,n),t.preventDefault(),t.stopPropagation(),a.isFav=!a.isFav,console.log(a.isFav),e.onUpdatePlaceItem(n,a.isFav)}}))})),$=(a(74),function(e){var t=o.a.createElement(v.d,null,o.a.createElement(v.b,{path:"/auth",component:R}),o.a.createElement(v.b,{path:"/register",component:q}),o.a.createElement(v.b,{path:"/",exact:!0,render:function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(X,null),o.a.createElement(Y,null))}}),o.a.createElement(v.a,{to:"/"}));return o.a.createElement("div",null,o.a.createElement(j,null,t))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ee=Object(s.b)({mapReduce:g}),te=Object(s.c)(ee);r.a.render(o.a.createElement(i.a,{store:te},o.a.createElement(l.a,{basename:"/#"},o.a.createElement($,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},8:function(e,t,a){e.exports=a.p+"static/media/heart-active-v2.be2c63a1.svg"}},[[46,1,2]]]);
//# sourceMappingURL=main.0ec234a4.chunk.js.map